<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - Baganiza Store</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MSG_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("productForm").addEventListener("submit", async (e) => {
                e.preventDefault();

                const name = document.getElementById("name").value;
                const price = parseFloat(document.getElementById("price").value);
                const description = document.getElementById("description").value;
                const category = document.getElementById("category").value;
                const imageFile = document.getElementById("image").files[0];

                let imageUrl = "";

                if (imageFile) {
                    const storageRef = ref(storage, 'products/' + Date.now() + "_" + imageFile.name);
                    await uploadBytes(storageRef, imageFile);
                    imageUrl = await getDownloadURL(storageRef);
                }

                await addDoc(collection(db, "products"), {
                    name,
                    price,
                    description,
                    category,
                    imageUrl
                });

                alert("âœ… Product added successfully!");
                document.getElementById("productForm").reset();
            });
        });
    </script>
</head>
<body>
    <h1>Admin - Add Product</h1>
    <form id="productForm">
        <input type="text" id="name" placeholder="Product Name" required><br>
        <input type="number" id="price" placeholder="Price" required><br>
        <input type="text" id="description" placeholder="Description"><br>
        <input type="text" id="category" placeholder="Category"><br>
        <input type="file" id="image" accept="image/*"><br>
        <button type="submit">Add Product</button>
    </form>
</body>
</html>
