<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My E-commerce Store</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  .product { border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; }
  .product h2 { margin-top: 0; }
</style>
</head>
<body>

<h1>Welcome to My Store</h1>
<div id="products-list"></div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // نفس إعدادات Firebase الخاصة بك هنا
  const firebaseConfig = {
    const firebaseConfig = {
  apiKey: "AIzaSyCcWgFDzs95TbVU7v5h_5O0lNzZvBlL90o",
  authDomain: "baganiza-66bf0.firebaseapp.com",
  projectId: "baganiza-66bf0",
  storageBucket: "baganiza-66bf0.firebasestorage.app",
  messagingSenderId: "1016966032123",
  appId: "1:1016966032123:web:fbffd397c7d8494fa79e5e"
};
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const productsList = document.getElementById('products-list');

  function escapeHtml(text) {
    return text.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
  }

  function loadProducts() {
    productsList.innerHTML = "<p>Loading products...</p>";
    db.collection("products").orderBy("name").get()
      .then(snapshot => {
        productsList.innerHTML = "";
        snapshot.forEach(doc => {
          const p = doc.data();
          const productHTML = `
            <div class="product">
              <h2>${escapeHtml(p.name)}</h2>
              <p>Price: $${p.price.toFixed(2)}</p>
              <p>${escapeHtml(p.description)}</p>
            </div>
          `;
          productsList.insertAdjacentHTML('beforeend', productHTML);
        });
        if (snapshot.empty) {
          productsList.innerHTML = "<p>No products found.</p>";
        }
      })
      .catch(e => {
        productsList.innerHTML = "<p>Failed to load products.</p>";
        console.error(e);
      });
  }

  loadProducts();
</script>
</body>
</html>
