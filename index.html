<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Store</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter&display=swap');

  body {
    font-family: 'Inter', sans-serif;
    padding: 20px;
    max-width: 1200px;
    margin: auto;
    background: #f0f4f8;
    color: #333;
    direction: ltr;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }

  #title {
    font-size: 2rem;
    font-weight: 700;
    color: #2978f0;
  }

  #langToggle {
    padding: 8px 14px;
    cursor: pointer;
    border: none;
    background-color: #2978f0;
    color: white;
    border-radius: 6px;
    font-weight: 600;
    transition: background-color 0.3s ease;
  }
  #langToggle:hover {
    background-color: #1e56b7;
  }

  #searchContainer {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }

  #searchInput {
    flex: 1;
    padding: 10px 12px;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 6px;
    outline-offset: 2px;
  }

  #categorySelect {
    padding: 10px 12px;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 6px;
    outline-offset: 2px;
  }

  #productsContainer {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }

  .product {
    background: #e6f0ff;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
  }
  .product:hover {
    background: #d0e4ff;
    transform: translateY(-5px);
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
  }
  .product h3 {
    margin: 0 0 10px;
    font-weight: 700;
    color: #0b3d91;
  }
  .product p {
    margin: 5px 0;
    font-size: 0.9rem;
    color: #555;
  }
  .product button {
    margin-top: 10px;
    width: 100%;
    padding: 8px 0;
    border: none;
    background-color: #2978f0;
    color: white;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .product button:hover {
    background-color: #1e56b7;
  }

  /* Cart & Sidebar */
  #cartContainer {
    display: flex;
    gap: 20px;
    margin-top: 30px;
  }

  #cart {
    width: 320px;
    background: #ffffff;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    padding: 20px;
    position: sticky;
    top: 20px;
    height: fit-content;
    color: #333;
  }

  #cart h2 {
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: #2978f0;
  }

  #cartIconContainer {
    position: relative;
    font-size: 1.5rem;
    cursor: pointer;
    color: #2978f0;
    margin-left: 5px;
  }

  #cartCount {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: #f1c40f;
    color: #222;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 12px;
    font-weight: 700;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #cartItems {
    max-height: 300px;
    overflow-y: auto;
  }

  .cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #ddd;
    padding: 8px 0;
  }
  .cart-item-name {
    font-weight: 600;
    flex: 1;
  }
  .cart-item-qty {
    margin: 0 10px;
    color: #555;
  }
  .cart-item-price {
    font-weight: 700;
    color: #2978f0;
    width: 60px;
    text-align: right;
  }
  .remove-btn {
    border: none;
    background: transparent;
    color: #d9534f;
    font-size: 18px;
    cursor: pointer;
    padding: 0 5px;
  }
  .remove-btn:hover {
    color: #b52b27;
  }

  #totalPrice {
    margin-top: 15px;
    font-size: 1.4rem;
    font-weight: 700;
    color: red;
    text-align: center;
    background: #ffe6e6;
    padding: 8px;
    border-radius: 8px;
  }

  #paymentOptions {
    margin-top: 20px;
  }

  #paymentOptions label {
    display: block;
    margin-bottom: 8px;
    cursor: pointer;
    font-weight: 600;
  }

  #paymentInputs > div {
    margin: 10px 0;
  }
  #paymentInputs label {
    display: block;
    font-weight: 600;
    margin-bottom: 4px;
  }
  #paymentInputs input {
    width: 100%;
    padding: 8px 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 1rem;
  }

  #checkoutBtn {
    margin-top: 20px;
    width: 100%;
    padding: 12px 0;
    background: #2978f0;
    border: none;
    color: white;
    font-weight: 700;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #checkoutBtn:hover {
    background-color: #1e56b7;
  }

  #invoice {
    margin-top: 20px;
    background: #e0f7fa;
    padding: 15px;
    border-radius: 10px;
    font-size: 1rem;
    color: #00796b;
    display: none;
    white-space: pre-wrap;
  }
</style>
</head>
<body>

<header>
  <h1 id="title">My Store</h1>
  <button id="langToggle">Ø¹Ø±Ø¨ÙŠ</button>
</header>

<div id="searchContainer">
  <input type="text" id="searchInput" placeholder="Search products..." aria-label="Search products" />
  <select id="categorySelect" aria-label="Filter by category">
    <option value="">All Categories</option>
  </select>
</div>

<div id="cartContainer">
  <main id="productsContainer" aria-live="polite" aria-label="Product listings">
    <!-- Products show here -->
  </main>

  <aside id="cart" aria-label="Shopping Cart">
    <h2>
      Shopping Cart
      <div id="cartIconContainer" aria-label="Shopping Cart Icon">
        ðŸ›’
        <div id="cartCount"></div>
      </div>
    </h2>
    <div id="cartItems">Cart is empty</div>
    <div id="totalPrice">Total: $0.00</div>

    <section id="paymentOptions" aria-label="Payment Options">
      <label><input type="radio" name="payment" value="cash" checked /> Cash on Delivery</label>
      <label><input type="radio" name="payment" value="bank" /> Bank Transfer</label>
      <label><input type="radio" name="payment" value="stcpay" /> STC Pay</label>
      <label><input type="radio" name="payment" value="paypal" /> PayPal</label>
      <label><input type="radio" name="payment" value="card" /> Credit Card</label>
    </section>

    <div id="paymentInputs">
      <div id="bankInput" style="display:none;">
        <label for="bankAccount">Bank Account Number</label>
        <input type="text" id="bankAccount" placeholder="Enter bank account number" />
      </div>
      <div id="stcpayInput" style="display:none;">
        <label for="stcpayNumber">STC Pay Mobile Number</label>
        <input type="text" id="stcpayNumber" placeholder="Enter STC Pay mobile number" />
      </div>
      <div id="paypalInput" style="display:none;">
        <label for="paypalEmail">PayPal Email</label>
        <input type="email" id="paypalEmail" placeholder="Enter PayPal email" />
      </div>
      <div id="cardInput" style="display:none;">
        <label for="cardNumber">Card Number</label>
        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" />
        <label for="cardExpiry">Expiry Date</label>
        <input type="month" id="cardExpiry" />
        <label for="cardCVC">CVC</label>
        <input type="text" id="cardCVC" placeholder="123" maxlength="4" />
      </div>
    </div>

    <button id="checkoutBtn">Checkout</button>

    <pre id="invoice" aria-live="polite"></pre>
  </aside>
</div>

<script>
  // Products and Cart Data
  let products = [
    {id: '1', name: 'Apple iPhone 13', price: 799, description: 'Latest Apple iPhone with A15 chip', category: 'Phones'},
    {id: '2', name: 'Samsung Galaxy S21', price: 699, description: 'Samsung flagship phone', category: 'Phones'},
    {id: '3', name: 'Apple AirPods Pro', price: 249, description: 'Noise-cancelling wireless earbuds', category: 'Accessories'},
    {id: '4', name: 'Dell XPS 13 Laptop', price: 999, description: 'Powerful and compact laptop', category: 'Computers'},
    {id: '5', name: 'Apple MacBook Air', price: 1099, description: 'Lightweight MacBook with M1 chip', category: 'Computers'},
    {id: '6', name: 'Sony WH-1000XM4', price: 349, description: 'Top noise-cancelling headphones', category: 'Accessories'}
  ];

  // UI elements
  const productsContainer = document.getElementById('productsContainer');
  const cartItemsDiv = document.getElementById('cartItems');
  const cartCount = document.getElementById('cartCount');
  const totalPriceDiv = document.getElementById('totalPrice');

  const paymentRadios = document.querySelectorAll('input[name="payment"]');
  const bankInputDiv = document.getElementById('bankInput');
  const stcpayInputDiv = document.getElementById('stcpayInput');
  const paypalInputDiv = document.getElementById('paypalInput');
  const cardInputDiv = document.getElementById('cardInput');

  const checkoutBtn = document.getElementById('checkoutBtn');
  const invoicePre = document.getElementById('invoice');

  let cartItems = {};

  // Render products in grid with 3 per row
  function renderProducts() {
    productsContainer.innerHTML = '';
    products.forEach(product => {
      const div = document.createElement('div');
      div.className = 'product';
      div.innerHTML = `
        <h3>${product.name}</h3>
        <p><strong>Price:</strong> $${product.price.toFixed(2)}</p>
        <p>${product.description}</p>
        <button>Add to Cart</button>
      `;
      div.querySelector('button').addEventListener('click', () => addToCart(product));
      productsContainer.appendChild(div);
    });
  }

  function addToCart(product){
    if(cartItems[product.id]){
      cartItems[product.id].qty++;
    } else {
      cartItems[product.id] = {...product, qty: 1};
    }
    renderCart();
  }

  function removeFromCart(id){
    delete cartItems[id];
    renderCart();
  }

  function renderCart(){
    const items = Object.values(cartItems);
    cartCount.textContent = items.reduce((acc, i) => acc + i.qty, 0);
    cartCount.style.display = items.length ? 'flex' : 'none';

    if(items.length === 0){
      cartItemsDiv.textContent = 'Cart is empty';
      totalPriceDiv.textContent = 'Total: $0.00';
      invoicePre.style.display = 'none';
      return;
    }

    cartItemsDiv.innerHTML = '';
    let total = 0;
    items.forEach(item => {
      total += item.price * item.qty;
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <span class="cart-item-name">${item.name}</span>
        <span class="cart-item-qty">x${item.qty}</span>
        <span class="cart-item-price">$${(item.price * item.qty).toFixed(2)}</span>
        <button class="remove-btn" aria-label="Remove ${item.name}">&times;</button>
      `;
      div.querySelector('button').addEventListener('click', () => removeFromCart(item.id));
      cartItemsDiv.appendChild(div);
    });

    totalPriceDiv.textContent = `Total: $${total.toFixed(2)}`;
    invoicePre.style.display = 'none';
  }

  // Show relevant payment input fields
  function updatePaymentInputs(){
    const selected = document.querySelector('input[name="payment"]:checked').value;
    bankInputDiv.style.display = selected === 'bank' ? 'block' : 'none';
    stcpayInputDiv.style.display = selected === 'stcpay' ? 'block' : 'none';
    paypalInputDiv.style.display = selected === 'paypal' ? 'block' : 'none';
    cardInputDiv.style.display = selected === 'card' ? 'block' : 'none';
  }

  paymentRadios.forEach(radio => {
    radio.addEventListener('change', updatePaymentInputs);
  });

  checkoutBtn.addEventListener('click', () => {
    if(Object.keys(cartItems).length === 0){
      alert('Cart is empty!');
      return;
    }

    const selected = document.querySelector('input[name="payment"]:checked').value;
    // Validate inputs based on payment method
    let paymentDetails = '';
    if(selected === 'bank'){
      const acc = document.getElementById('bankAccount').value.trim();
      if(!acc){
        alert('Please enter your bank account number.');
        return;
      }
      paymentDetails = `Bank Account Number: ${acc}`;
    } else if(selected === 'stcpay'){
      const num = document.getElementById('stcpayNumber').value.trim();
      if(!num){
        alert('Please enter your STC Pay mobile number.');
        return;
      }
      paymentDetails = `STC Pay Mobile Number: ${num}`;
    } else if(selected === 'paypal'){
      const email = document.getElementById('paypalEmail').value.trim();
      if(!email || !email.includes('@')){
        alert('Please enter a valid PayPal email.');
        return;
      }
      paymentDetails = `PayPal Email: ${email}`;
    } else if(selected === 'card'){
      const cardNum = document.getElementById('cardNumber').value.trim();
      const expiry = document.getElementById('cardExpiry').value;
      const cvc = document.getElementById('cardCVC').value.trim();

      if(cardNum.length < 12 || !expiry || cvc.length < 3){
        alert('Please enter valid credit card details.');
        return;
      }
      paymentDetails = `Card Number: ${cardNum}\nExpiry: ${expiry}\nCVC: ${cvc}`;
    } else {
      paymentDetails = 'Cash on Delivery';
    }

    // Generate invoice
    const items = Object.values(cartItems);
    let invoiceText = '--- Invoice ---\n\nItems:\n';
    let total = 0;
    items.forEach(i => {
      invoiceText += `${i.name} x${i.qty} - $${(i.price * i.qty).toFixed(2)}\n`;
      total += i.price * i.qty;
    });
    invoiceText += `\nTotal: $${total.toFixed(2)}\n\nPayment Method: ${paymentMethodName(selected)}\n${paymentDetails}\n\nThank you for your purchase!`;

    invoicePre.textContent = invoiceText;
    invoicePre.style.display = 'block';

    // Optionally clear cart after checkout
    cartItems = {};
    renderCart();
  });

  function paymentMethodName(method){
    switch(method){
      case 'cash': return 'Cash on Delivery';
      case 'bank': return 'Bank Transfer';
      case 'stcpay': return 'STC Pay';
      case 'paypal': return 'PayPal';
      case 'card': return 'Credit Card';
      default: return method;
    }
  }

  // Initial render
  renderProducts();
  renderCart();
  updatePaymentInputs();
</script>

</body>
</html>
